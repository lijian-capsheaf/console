#!/usr/bin/python
# -*- coding: utf-8 -*-

__alias__ = ["h", "H", "?"]
__capability__ = 7

def help(cmd, *args, **argv):
    """
...
_n      Get help
_f      help [-dms] [pattern ...]
        Display information about builtin commands.
        
        Displays brief summaries of builtin commands.  If PATTERN is
        specified, gives detailed help on all commands matching PATTERN,
        otherwise the list of help topics is printed.

        Options:
          -d    output short description for each topic
          -m    display usage in pseudo-manpage format
          -s    output only a short usage synopsis for each topic matching
            PATTERN

        Arguments:
          PATTERN   Pattern specifiying a help topic
    
        Exit Status:
        Returns success unless PATTERN is not found or an invalid option is given."""
   
    context = argv["context"]
    
    leng = len(args)
    
    if leng:
        helpinfo = context.get_doc(args[0])
        if helpinfo == None:
            context.write("-shell: help: no help topics match %s'.  Try `help help' or `man -k %s' or `info %s'."% (args[0], args[0], args[0]))
        elif helpinfo == "":
	    context.write("No helpinfo")
	else:
            context.write("%s" % helpinfo["format"].rstrip().lstrip())
            context.write("%s" % helpinfo["description"].rstrip().lstrip())
	    return
    else:
        modulenames = context.commands
        for modulename in modulenames:
            helpinfo = context.get_doc(modulename, "format")
	    helpinfo = helpinfo.strip("\n")
            if helpinfo == "":
		continue
	    elif helpinfo == None:
		continue
	    else:
		context.write("%s" % helpinfo.strip())	
