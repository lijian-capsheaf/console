# -*- coding: utf-8 -*-

__capability__ = 6

from _interface_auxiliary import interface_stp_set_fromconfig as fromconfig_interface
from _interface_auxiliary import interface_stp_set as set_stp_interface
from _interface_auxiliary import interface as date_iface

def interface_stp_set(cmd, *args, **argv):
    """
    """
    context = argv["context"]
    def isbr(br):
        brs = []
        iface = date_iface()
        for brses in iface:
            brs.append(brses[0])
        if br in brs:
            return True
        else:
            return False

    leng = len(args)
    
    if leng == 1:
        if args[0] == "fromconfig":
            exie_state = fromconfig_interface()
            if exit_state == True:
                return
            else:
                context.write("%s" % exit_state)
                return
        else:
            context.write("%s:%s not true param"% (cmd, args[0]))
            return

    elif leng > 1:
        brs = []
        states = ["on", "off"]
        state = ""
        for arg in args:
            if isbr(arg):
                brs.append(arg)
            elif arg in states:
                state = arg
                if len(brs):
                    for eth in brs:
            	        set_stp_interface(eth, state)
                    return
                else:
                    context.write("have no interface")
                    return
            else:
                context.write("%s is not a interface"% arg)		
                return
    else:
        context.write("%s:Missing parameter"% cmd)
        return
