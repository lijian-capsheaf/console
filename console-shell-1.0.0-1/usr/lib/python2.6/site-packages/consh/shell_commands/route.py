# -*- coding: utf-8 -*-

__capability__ = 6

def route(cmd, *args, **argv):
    """
...     
_n      Route managerment
_f      route [-nNvee] [-FC] [<AF>]           List kernel routing tables
_f      route [-v] [-FC] {add|del|flush} ...  Modify routing table for AF.
_f      route {-h|--help} [<AF>]              Detailed usage syntax for specified AF.
_f      route {-V|--version}                  Display version/author and exit.
       	 -v, --verbose            be verbose
         -n, --numeric            don't resolve names
         -e, --extend             display other/more information
         -F, --fib                display Forwarding Information Base (default)
         -C, --cache              display routing cache instead of FIB

        <AF>=Use '-A <af>' or '--<af>'; default: inet
        List of possible address families (which support routing):
          inet (DARPA Internet) inet6 (IPv6) ax25 (AMPR AX.25)
          netrom (AMPR NET/ROM) ipx (Novell IPX) ddp (Appletalk DDP) 
          x25 (CCITT X.25) 
    """
    def route_show():
	from _route_auxiliary import getroute as show_route
        route_date = show_route()
        from _prettytable import PrettyTable
        route_t = PrettyTable(["Destination", "Gateway", "Genmask", "Flags", "Metric", "Ref", "Use", "Iface"])
        route_t.border = False
	route_t.align = "l"
	for route_r in route_date:
            if route_r[0] == "0.0.0.0":
                route_r[0] = "default"
            if route_r[1] == "0.0.0.0":
                route_r[1] = "*"
            route_t.add_row(route_r)

        context.write("%s" % route_t)


    context = argv["context"]

    leng = len(args)

    if leng:
        cmd_next = args[0]
        args = list(args)
	args.pop(0)
        context.func_next(cmd, cmd_next, args)
    else:
	route_show()
