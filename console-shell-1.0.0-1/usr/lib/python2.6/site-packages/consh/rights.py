#!/usr/bin/python
# -*- coding: utf-8 -*-

import os
import re
import sys

capability_name = "capability"
default_capability = 6

ERROR = 1
USER = 2
ADMIN = 4

class Rights(object):
    _meta = [ERROR, USER, ADMIN]
    ERROR =  ERROR  # not log
    USER  =  USER    
    ADMIN =  ADMIN   

def has_rights(right,rights = Rights._meta):
    if right in rights:
        return True
    else:
        return False


def get_rights(module_name):
    try:
        delTrue = False
        if not (module_name in sys.modules.keys()):
            __import__(module_name)
            delTrue = True
        module = sys.modules[module_name]
        right = module.__capability__
        if right == None:
            right = default_capability
        if delTrue:
            del(module)
        return right
    except:
        print "Error when load command: %s"%module_name
        return 0


__all__ = ['Rights','has_rights','get_rights']
