#!/usr/bin/python
# -*- coding: utf-8 -*-

import sys
import tty
import termios

def getch():
    fd = sys.stdin.fileno()
    sys.stdin.flush()
    old_ttyinfo = termios.tcgetattr(fd)
    try:
	tty.setraw(fd)
	ch = sys.stdin.read(1)
    finally:
	termios.tcsetattr(fd, termios.TCSADRAIN, old_ttyinfo)
    return ch

def getpass(maskchar = "*"):
    passch = ""
    while True:
	ch = getch()
	# end of getpass
	if ch == "\r" or ch == "\n":
	    sys.stdout.write("\n")
	    sys.stdout.flush()
	    return passch
	# Backspace
	elif ch == "\b" or ord(ch) == 127:
	    if len(passch) > 0:
		sys.stdout.write("\b \b")
		sys.stdout.flush()
		passch = passch[:-1]
	else:
	    if maskchar != None:
		sys.stdout.write(maskchar)
		sys.stdout.flush()
            passch += ch

__all__ = ["getpass"]


